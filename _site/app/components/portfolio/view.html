<div class="app__component app__component--porfolio"><h3 ng-show="$ctrl.user.transactions.open[0]" class="app__component__subtitle">Open Transactions</h3><table ng-show="$ctrl.user.transactions.open[0]" class="app__component--portfolio__transactions"><tr ng-init="openSort = &quot;symbol&quot;" class="app__component--portfolio__transactions__transaction"><th ng-click="openSort = openSort == &quot;symbol&quot; ? &quot;-symbol&quot; : &quot;symbol&quot;"><i ng-show="openSort == &quot;symbol&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-symbol&quot;" class="ion ion-arrow-up-a"></i><span>Symbol</span></th><th ng-click="openSort = openSort == &quot;name&quot; ? &quot;-name&quot; : &quot;name&quot;"><i ng-show="openSort == &quot;name&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-name&quot;" class="ion ion-arrow-up-a"></i><span>Name</span></th><th ng-click="openSort = openSort == &quot;price.open&quot; ? &quot;-price.open&quot; : &quot;price.open&quot;"><i ng-show="openSort == &quot;price.open&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-price.open&quot;" class="ion ion-arrow-up-a"></i><span>Open Price</span></th><th ng-click="openSort = openSort == &quot;price.close&quot; ? &quot;-price.close&quot; : &quot;price.close&quot;"><i ng-show="openSort == &quot;price.close&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-price.close&quot;" class="ion ion-arrow-up-a"></i><span>Current Price</span></th><th ng-click="openSort = openSort == &quot;shares&quot; ? &quot;-shares&quot; : &quot;shares&quot;"><i ng-show="openSort == &quot;shares&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-shares&quot;" class="ion ion-arrow-up-a"></i><span>Shares</span></th><th ng-click="openSort = openSort == &quot;costBasis&quot; ? &quot;-costBasis&quot; : &quot;costBasis&quot;"><i ng-show="openSort == &quot;costBasis&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-costBasis&quot;" class="ion ion-arrow-up-a"></i><span>Cost Basis</span></th><th ng-click="openSort = openSort == &quot;marketValue&quot; ? &quot;-marketValue&quot; : &quot;marketValue&quot;"><i ng-show="openSort == &quot;marketValue&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-marketValue&quot;" class="ion ion-arrow-up-a"></i><span>Market Value</span></th><th ng-click="openSort = openSort == &quot;estimatedGain&quot; ? &quot;-estimatedGain&quot; : &quot;estimatedGain&quot;"><i ng-show="openSort == &quot;estimatedGain&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-estimatedGain&quot;" class="ion ion-arrow-up-a"></i><span>Estimated Gain</span></th><th ng-click="openSort = openSort == &quot;estimatedGainPercent&quot; ? &quot;-estimatedGainPercent&quot; : &quot;estimatedGainPercent&quot;"><i ng-show="openSort == &quot;estimatedGainPercent&quot;" class="ion ion-arrow-down-a"></i><i ng-show="openSort == &quot;-estimatedGainPercent&quot;" class="ion ion-arrow-up-a"></i><span>Estimated Gain %</span></th><th></th></tr><tr ng-repeat="transaction in $ctrl.user.transactions.open | orderBy : openSort" class="app__component--portfolio__transactions__transaction"><td ng-repeat="quote in quotes | filter : transaction.symbol" ng-init="transaction.price.close = quote.level; transaction.costBasis = transaction.price.open * transaction.shares; transaction.marketValue = quote.l * transaction.shares; transaction.estimatedGain = transaction.marketValue - transaction.costBasis; transaction.estimatedGainPercent = transaction.estimatedGain / transaction.costBasis * 100" style="display: none"></td><td>{{ transaction.symbol }}</td><td>{{ transaction.name }}</td><td>{{ transaction.price.open | number: 2 }}</td><td>{{ transaction.price.close | number: 2  }}</td><td>{{ transaction.shares }}</td><td>{{ transaction.costBasis | number : 2 }}  </td><td>{{ transaction.marketValue | number : 2 }}      </td><td ng-class="transaction.estimatedGain &gt;= 0 ? &quot;profit&quot; : &quot;loss&quot;">{{ transaction.estimatedGain | number : 2 }} USD</td><td ng-class=" transaction.estimatedGainPercent &gt;= 0 ? &quot;profit&quot; : &quot;loss&quot;">{{  transaction.estimatedGainPercent | number : 2 }} %</td><td ng-click="sell($index)" class="sell">Sell</td></tr></table><h3 class="app__component__subtitle">Closed Transactions</h3><table class="app__component--portfolio__transactions"><tr ng-init="closedSort = &quot;symbol&quot;" class="app__component--portfolio__transactions__transaction"><th ng-click="closedSort = closedSort == &quot;symbol&quot; ? &quot;-symbol&quot; : &quot;symbol&quot;"><i ng-show="closedSort == &quot;symbol&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-symbol&quot;" class="ion ion-arrow-up-a"></i><span>Symbol</span></th><th ng-click="closedSort = closedSort == &quot;name&quot; ? &quot;-name&quot; : &quot;name&quot;"><i ng-show="closedSort == &quot;name&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-name&quot;" class="ion ion-arrow-up-a"></i><span>Name</span></th><th ng-click="closedSort = closedSort == &quot;price.open&quot; ? &quot;-price.open&quot; : &quot;price.open&quot;"><i ng-show="closedSort == &quot;price.open&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-price.open&quot;" class="ion ion-arrow-up-a"></i><span>Open Price</span></th><th ng-click="closedSort = closedSort == &quot;price.close&quot; ? &quot;-price.close&quot; : &quot;price.close&quot;"><i ng-show="closedSort == &quot;price.close&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-price.close&quot;" class="ion ion-arrow-up-a"></i><span>Closed Price</span></th><th ng-click="closedSort = closedSort == &quot;shares&quot; ? &quot;-shares&quot; : &quot;shares&quot;"><i ng-show="closedSort == &quot;shares&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-shares&quot;" class="ion ion-arrow-up-a"></i><span>Shares</span></th><th ng-click="closedSort = closedSort == &quot;costBasis&quot; ? &quot;-costBasis&quot; : &quot;costBasis&quot;"><i ng-show="closedSort == &quot;costBasis&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-costBasis&quot;" class="ion ion-arrow-up-a"></i><span>Cost Basis</span></th><th ng-click="closedSort = closedSort == &quot;marketValue&quot; ? &quot;-marketValue&quot; : &quot;marketValue&quot;"><i ng-show="closedSort == &quot;marketValue&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-marketValue&quot;" class="ion ion-arrow-up-a"></i><span>Market Value</span></th><th ng-click="closedSort = closedSort == &quot;gain&quot; ? &quot;-gain&quot; : &quot;gain&quot;"><i ng-show="closedSort == &quot;gain&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-gain&quot;" class="ion ion-arrow-up-a"></i><span>Gain</span></th><th ng-click="closedSort = closedSort == &quot;gainPercent&quot; ? &quot;-gainPercent&quot; : &quot;gainPercent&quot;"><i ng-show="closedSort == &quot;gainPercent&quot;" class="ion ion-arrow-down-a"></i><i ng-show="closedSort == &quot;-gainPercent&quot;" class="ion ion-arrow-up-a"></i><span>Gain %</span></th></tr><tr ng-repeat="transaction in user.transactions.closed | orderBy : closedSort" class="app__component--portfolio__transactions__transaction"><td>{{ transaction.symbol }}</td><td>{{ transaction.name }}</td><td>{{ transaction.price.open | number: 2 }}</td><td>{{ transaction.price.close | number: 2 }}</td><td>{{ transaction.shares }}</td><td ng-init="transaction.costBasis = transaction.price.open * transaction.shares">{{ transaction.costBasis | number : 2 }}</td><td ng-init="transaction.marketValue = transaction.price.close * transaction.shares">{{ transaction.marketValue | number : 2 }}</td><td ng-init="transaction.gain = transaction.marketValue - transaction.costBasis" ng-class="transaction.gain &gt;= 0 ? &quot;profit&quot; : &quot;loss&quot;">{{ transaction.gain | number : 2 }} USD</td><td ng-init="transaction.gainPercent = (transaction.gain / transaction.costBasis ) * 100" ng-class="transaction.gainPercent &gt;= 0 ? &quot;profit&quot; : &quot;loss&quot;">{{ transaction.gainPercent | number : 2 }} %</td></tr></table></div>